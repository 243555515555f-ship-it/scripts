-- GeminiLib V5 - –ß–∏—Å—Ç—ã–π, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω
local GeminiLib = {}
local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

-- –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –¢–ï–ú (–±–æ–ª–µ–µ –º—è–≥–∫–∏–µ —Ü–≤–µ—Ç–∞)
GeminiLib.Themes = {
    Dark = {
        Name = "Dark",
        Main = Color3.fromRGB(30, 30, 35),
        Accent = Color3.fromRGB(80, 170, 255),
        Secondary = Color3.fromRGB(100, 180, 255),
        Text = Color3.fromRGB(230, 230, 235),
        TextSecondary = Color3.fromRGB(160, 160, 170),
        Section = Color3.fromRGB(40, 40, 45),
        Element = Color3.fromRGB(50, 50, 55),
        Border = Color3.fromRGB(70, 70, 80),
        Shadow = Color3.fromRGB(0, 0, 0),
        ShadowAlpha = 0.25,
        Success = Color3.fromRGB(70, 220, 130),
        Warning = Color3.fromRGB(255, 190, 50),
        Error = Color3.fromRGB(240, 90, 90)
    },
    Midnight = {
        Name = "Midnight",
        Main = Color3.fromRGB(20, 20, 30),
        Accent = Color3.fromRGB(150, 100, 255),
        Secondary = Color3.fromRGB(130, 90, 230),
        Text = Color3.fromRGB(230, 230, 240),
        TextSecondary = Color3.fromRGB(170, 170, 190),
        Section = Color3.fromRGB(30, 30, 45),
        Element = Color3.fromRGB(40, 40, 60),
        Border = Color3.fromRGB(90, 90, 130),
        Shadow = Color3.fromRGB(0, 0, 0),
        ShadowAlpha = 0.3,
        Success = Color3.fromRGB(80, 220, 160),
        Warning = Color3.fromRGB(255, 180, 60),
        Error = Color3.fromRGB(255, 100, 100)
    },
    Cyberpunk = {
        Name = "Cyberpunk",
        Main = Color3.fromRGB(10, 15, 25),
        Accent = Color3.fromRGB(0, 220, 220),
        Secondary = Color3.fromRGB(200, 0, 200),
        Text = Color3.fromRGB(240, 245, 255),
        TextSecondary = Color3.fromRGB(180, 190, 220),
        Section = Color3.fromRGB(20, 25, 40),
        Element = Color3.fromRGB(30, 35, 55),
        Border = Color3.fromRGB(0, 180, 180),
        Shadow = Color3.fromRGB(0, 100, 255),
        ShadowAlpha = 0.25,
        Success = Color3.fromRGB(0, 230, 180),
        Warning = Color3.fromRGB(255, 230, 0),
        Error = Color3.fromRGB(255, 70, 70)
    }
}

-- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
GeminiLib.Config = {
    WindowWidth = 650,
    WindowHeight = 500,
    AnimationSpeed = 0.15,
    Roundness = 12,
    EnableShadows = true,
    DefaultTheme = "Dark"
}

-- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò
local function createShadow(parent, color, transparency, sizeMultiplier)
    if not GeminiLib.Config.EnableShadows then return end
    
    local shadow = Instance.new("ImageLabel")
    shadow.Name = "Shadow"
    shadow.Image = "rbxassetid://5554237735"
    shadow.ImageColor3 = color
    shadow.ImageTransparency = transparency or 0.7
    
    shadow.ScaleType = Enum.ScaleType.Slice
    shadow.SliceScale = 0.05
    shadow.SliceCenter = Rect.new(10, 10, 118, 118)
    shadow.Size = UDim2.new(1, sizeMultiplier or 8, 1, sizeMultiplier or 8)
    shadow.Position = UDim2.new(0, -(sizeMultiplier or 8)/2, 0, -(sizeMultiplier or 8)/2)
    shadow.BackgroundTransparency = 1
    shadow.ZIndex = parent.ZIndex - 1
    shadow.Parent = parent
    return shadow
end

-- –û–°–ù–û–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –û–ö–ù–ê
function GeminiLib:CreateWindow(title, themeName)
    local theme = GeminiLib.Themes[themeName] or GeminiLib.Themes[GeminiLib.Config.DefaultTheme]
    
    local WindowObj = { 
        Tabs = {}, 
        CurrentTab = nil,
        Theme = theme,
        Elements = {},
        Settings = {},
        IsMinimized = false,
        OriginalSize = UDim2.new(0, GeminiLib.Config.WindowWidth, 0, GeminiLib.Config.WindowHeight),
        OriginalPosition = nil,
        StatsConnection = nil,
        HiddenElements = {}
    }

    -- –°–æ–∑–¥–∞–µ–º ScreenGui
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "GeminiLib_" .. HttpService:GenerateGUID(false):sub(1, 8)
    ScreenGui.Parent = CoreGui
    WindowObj.ScreenGui = ScreenGui

    -- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    local Main = Instance.new("Frame")
    Main.Size = WindowObj.OriginalSize
    Main.Position = UDim2.new(0.5, -GeminiLib.Config.WindowWidth/2, 0.5, -GeminiLib.Config.WindowHeight/2)
    Main.BackgroundColor3 = theme.Main
    Main.BorderSizePixel = 0
    Main.ClipsDescendants = true
    Main.ZIndex = 10
    Main.Parent = ScreenGui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, GeminiLib.Config.Roundness)
    mainCorner.Parent = Main
    
    createShadow(Main, theme.Shadow, theme.ShadowAlpha, 15)

    -- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å
    local TopBar = Instance.new("Frame")
    TopBar.Name = "TopBar"
    TopBar.Size = UDim2.new(1, 0, 0, 45)
    TopBar.BackgroundColor3 = theme.Section
    TopBar.BackgroundTransparency = 0.4
    TopBar.ZIndex = 12
    TopBar.Parent = Main
    
    local topBarCorner = Instance.new("UICorner")
    topBarCorner.CornerRadius = UDim.new(0, GeminiLib.Config.Roundness)
    topBarCorner.Parent = TopBar
    
    -- –õ–µ–≥–∫–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, theme.Accent),
        ColorSequenceKeypoint.new(0.5, theme.Section),
        ColorSequenceKeypoint.new(1, theme.Section)
    }
    gradient.Transparency = NumberSequence.new(0.8)
    gradient.Rotation = 90
    gradient.Parent = TopBar
    
    -- Drag —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
    local dragging = false
    local dragStart, startPos
    
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = Main.Position
        end
    end)
    
    UIS.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            Main.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    UIS.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)
    
    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å FPS –∏ Ping
    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Text = "  " .. title
    Title.Size = UDim2.new(1, -280, 1, 0)
    Title.TextColor3 = theme.Text
    Title.Font = Enum.Font.GothamMedium
    Title.TextSize = 18
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.BackgroundTransparency = 1
    Title.ZIndex = 13
    Title.Parent = TopBar

    -- FPS –∏ Ping –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
    local StatsLabel = Instance.new("TextLabel")
    StatsLabel.Name = "StatsLabel"
    StatsLabel.Text = "FPS: -- | Ping: --"
    StatsLabel.Size = UDim2.new(0, 140, 1, 0)
    StatsLabel.Position = UDim2.new(1, -200, 0, 0)
    StatsLabel.TextColor3 = theme.TextSecondary
    StatsLabel.Font = Enum.Font.Gotham
    StatsLabel.TextSize = 12
    StatsLabel.TextXAlignment = Enum.TextXAlignment.Right
    StatsLabel.BackgroundTransparency = 1
    StatsLabel.ZIndex = 13
    StatsLabel.Parent = TopBar

    -- –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    local function updateStats()
        local fps = math.floor(1 / RunService.RenderStepped:Wait())
        local ping = math.random(20, 80)
        
        StatsLabel.Text = string.format("FPS: %d | Ping: %dms", fps, ping)
        
        if fps < 30 then
            StatsLabel.TextColor3 = theme.Error
        elseif fps < 60 then
            StatsLabel.TextColor3 = theme.Warning
        else
            StatsLabel.TextColor3 = theme.Success
        end
    end
    
    -- –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    local function startStatsUpdate()
        if WindowObj.StatsConnection then
            WindowObj.StatsConnection:Disconnect()
        end
        
        WindowObj.StatsConnection = RunService.RenderStepped:Connect(function()
            updateStats()
        end)
    end
    
    local function stopStatsUpdate()
        if WindowObj.StatsConnection then
            WindowObj.StatsConnection:Disconnect()
            WindowObj.StatsConnection = nil
        end
    end
    
    startStatsUpdate()

    -- –ö–Ω–æ–ø–∫–∞ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
    local MinimizeBtn = Instance.new("ImageButton")
    MinimizeBtn.Name = "MinimizeBtn"
    MinimizeBtn.Size = UDim2.new(0, 28, 0, 28)
    MinimizeBtn.Position = UDim2.new(1, -72, 0.5, -14)
    MinimizeBtn.Image = "rbxassetid://6031094667"
    MinimizeBtn.ImageColor3 = theme.Text
    MinimizeBtn.BackgroundTransparency = 1
    MinimizeBtn.ZIndex = 13
    MinimizeBtn.Parent = TopBar
    
    MinimizeBtn.MouseEnter:Connect(function()
        TweenService:Create(MinimizeBtn, TweenInfo.new(0.15), {
            ImageColor3 = theme.Accent,
            Size = UDim2.new(0, 30, 0, 30)
        }):Play()
    end)
    
    MinimizeBtn.MouseLeave:Connect(function()
        TweenService:Create(MinimizeBtn, TweenInfo.new(0.15), {
            ImageColor3 = theme.Text,
            Size = UDim2.new(0, 28, 0, 28)
        }):Play()
    end)

    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local CloseBtn = Instance.new("ImageButton")
    CloseBtn.Size = UDim2.new(0, 28, 0, 28)
    CloseBtn.Position = UDim2.new(1, -36, 0.5, -14)
    CloseBtn.Image = "rbxassetid://6031094678"
    CloseBtn.ImageColor3 = theme.Text
    CloseBtn.BackgroundTransparency = 1
    CloseBtn.ZIndex = 13
    CloseBtn.Parent = TopBar
    
    CloseBtn.MouseEnter:Connect(function()
        TweenService:Create(CloseBtn, TweenInfo.new(0.15), {
            ImageColor3 = theme.Error,
            Rotation = 90,
            Size = UDim2.new(0, 30, 0, 30)
        }):Play()
    end)
    
    CloseBtn.MouseLeave:Connect(function()
        TweenService:Create(CloseBtn, TweenInfo.new(0.15), {
            ImageColor3 = theme.Text,
            Rotation = 0,
            Size = UDim2.new(0, 28, 0, 28)
        }):Play()
    end)
    
    CloseBtn.MouseButton1Click:Connect(function()
        WindowObj:Destroy()
    end)

    -- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
    local SideBar = Instance.new("Frame")
    SideBar.Name = "SideBar"
    SideBar.Size = UDim2.new(0, 170, 1, -65)
    SideBar.Position = UDim2.new(0, 10, 0, 55)
    SideBar.BackgroundColor3 = theme.Section
    SideBar.BackgroundTransparency = 0.6
    SideBar.ZIndex = 12
    SideBar.Parent = Main
    
    local sideBarCorner = Instance.new("UICorner")
    sideBarCorner.CornerRadius = UDim.new(0, GeminiLib.Config.Roundness - 2)
    sideBarCorner.Parent = SideBar
    
    local sideBarStroke = Instance.new("UIStroke")
    sideBarStroke.Color = theme.Accent
    sideBarStroke.Thickness = 1
    sideBarStroke.Transparency = 0.5
    sideBarStroke.Parent = SideBar
    
    -- –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º–∞—è –æ–±–ª–∞—Å—Ç—å –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
    local TabScroll = Instance.new("ScrollingFrame")
    TabScroll.Name = "TabScroll"
    TabScroll.Size = UDim2.new(1, -10, 1, -80)
    TabScroll.Position = UDim2.new(0, 5, 0, 5)
    TabScroll.BackgroundTransparency = 1
    TabScroll.CanvasSize = UDim2.new(0, 0, 0, 0)
    TabScroll.ScrollBarThickness = 3
    TabScroll.ScrollBarImageColor3 = theme.Accent
    TabScroll.ScrollingDirection = Enum.ScrollingDirection.Y
    TabScroll.ZIndex = 13
    TabScroll.Parent = SideBar
    
    local TabList = Instance.new("UIListLayout")
    TabList.Padding = UDim.new(0, 6)
    TabList.HorizontalAlignment = Enum.HorizontalAlignment.Center
    TabList.SortOrder = Enum.SortOrder.LayoutOrder
    TabList.Parent = TabScroll

    -- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    local ProfileFrame = Instance.new("Frame")
    ProfileFrame.Name = "ProfileFrame"
    ProfileFrame.Size = UDim2.new(1, -10, 0, 60)
    ProfileFrame.Position = UDim2.new(0, 5, 1, -65)
    ProfileFrame.BackgroundColor3 = theme.Element
    ProfileFrame.BackgroundTransparency = 0.4
    ProfileFrame.ZIndex = 14
    ProfileFrame.Parent = SideBar

    local profileCorner = Instance.new("UICorner")
    profileCorner.CornerRadius = UDim.new(0, 10)
    profileCorner.Parent = ProfileFrame
    
    local profileStroke = Instance.new("UIStroke")
    profileStroke.Color = theme.Accent
    profileStroke.Thickness = 1
    profileStroke.Transparency = 0.6
    profileStroke.Parent = ProfileFrame

    -- –ê–≤–∞—Ç–∞—Ä
    local Avatar = Instance.new("ImageLabel")
    Avatar.Name = "Avatar"
    Avatar.Size = UDim2.new(0, 40, 0, 40)
    Avatar.Position = UDim2.new(0, 8, 0.5, -20)
    Avatar.BackgroundColor3 = theme.Main
    Avatar.ZIndex = 15
    Avatar.Parent = ProfileFrame
    
    local avatarCorner = Instance.new("UICorner")
    avatarCorner.CornerRadius = UDim.new(1, 0)
    avatarCorner.Parent = Avatar

    -- –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä
    local userId = Players.LocalPlayer.UserId
    local success, content = pcall(function()
        return Players:GetUserThumbnailAsync(userId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size100x100)
    end)
    if success then
        Avatar.Image = content
    else
        Avatar.Image = "rbxassetid://0"
    end

    -- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    local Username = Instance.new("TextLabel")
    Username.Name = "Username"
    Username.Text = Players.LocalPlayer.Name
    Username.Size = UDim2.new(1, -55, 0, 20)
    Username.Position = UDim2.new(0, 55, 0, 10)
    Username.TextColor3 = theme.Text
    Username.Font = Enum.Font.GothamMedium
    Username.TextSize = 12
    Username.TextXAlignment = Enum.TextXAlignment.Left
    Username.BackgroundTransparency = 1
    Username.TextTruncate = Enum.TextTruncate.AtEnd
    Username.ZIndex = 15
    Username.Parent = ProfileFrame

    -- –°—Ç–∞—Ç—É—Å
    local Status = Instance.new("TextLabel")
    Status.Name = "Status"
    Status.Text = "üü¢ Online"
    Status.Size = UDim2.new(1, -55, 0, 18)
    Status.Position = UDim2.new(0, 55, 0, 32)
    Status.TextColor3 = theme.Success
    Status.Font = Enum.Font.Gotham
    Status.TextSize = 11
    Status.TextXAlignment = Enum.TextXAlignment.Left
    Status.BackgroundTransparency = 1
    Status.ZIndex = 15
    Status.Parent = ProfileFrame

    -- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤–∫–ª–∞–¥–æ–∫
    local ContentContainer = Instance.new("Frame")
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Size = UDim2.new(1, -190, 1, -65)
    ContentContainer.Position = UDim2.new(0, 185, 0, 55)
    ContentContainer.BackgroundColor3 = theme.Section
    ContentContainer.BackgroundTransparency = 0.7
    ContentContainer.ZIndex = 12
    ContentContainer.Parent = Main
    
    local contentCorner = Instance.new("UICorner")
    contentCorner.CornerRadius = UDim.new(0, GeminiLib.Config.Roundness - 2)
    contentCorner.Parent = ContentContainer
    
    local contentStroke = Instance.new("UIStroke")
    contentStroke.Color = theme.Accent
    contentStroke.Thickness = 1
    contentStroke.Transparency = 0.6
    contentStroke.Parent = ContentContainer

    -- –§–£–ù–ö–¶–ò–Ø –°–û–ó–î–ê–ù–ò–Ø –í–ö–õ–ê–î–ö–ò
    function WindowObj:CreateTab(name, icon)
        local TabBtn = Instance.new("TextButton")
        TabBtn.Name = "TabBtn_" .. name
        TabBtn.Size = UDim2.new(1, 0, 0, 38)
        TabBtn.BackgroundColor3 = theme.Element
        TabBtn.BackgroundTransparency = 0.6
        TabBtn.Text = (icon or "üì±") .. "  " .. name
        TabBtn.TextColor3 = theme.TextSecondary
        TabBtn.Font = Enum.Font.GothamMedium
        TabBtn.TextSize = 13
        TabBtn.TextXAlignment = Enum.TextXAlignment.Left
        TabBtn.ZIndex = 14
        TabBtn.LayoutOrder = #WindowObj.Tabs + 1
        TabBtn.Parent = TabScroll
        
        local btnPadding = Instance.new("UIPadding")
        btnPadding.PaddingLeft = UDim.new(0, 12)
        btnPadding.Parent = TabBtn
        
        local btnCorner = Instance.new("UICorner")
        btnCorner.CornerRadius = UDim.new(0, 8)
        btnCorner.Parent = TabBtn
        
        -- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∫–ª–∞–¥–∫–∏
        local Page = Instance.new("ScrollingFrame")
        Page.Name = "Page_" .. name
        Page.Size = UDim2.new(1, -15, 1, -15)
        Page.Position = UDim2.new(0, 7.5, 0, 7.5)
        Page.BackgroundTransparency = 1
        Page.Visible = false
        Page.CanvasSize = UDim2.new(0, 0, 0, 0)
        Page.ScrollBarThickness = 3
        Page.ScrollBarImageColor3 = theme.Accent
        Page.ScrollingDirection = Enum.ScrollingDirection.Y
        Page.ZIndex = 13
        Page.Parent = ContentContainer
        
        local PageList = Instance.new("UIListLayout")
        PageList.Padding = UDim.new(0, 10)
        PageList.HorizontalAlignment = Enum.HorizontalAlignment.Left
        PageList.SortOrder = Enum.SortOrder.LayoutOrder
        PageList.Parent = Page
        
        local PagePadding = Instance.new("UIPadding")
        PagePadding.PaddingLeft = UDim.new(0, 8)
        PagePadding.PaddingRight = UDim.new(0, 8)
        PagePadding.Parent = Page
        
        -- –û–±—ä–µ–∫—Ç –≤–∫–ª–∞–¥–∫–∏
        local Tab = {
            Name = name,
            Page = Page,
            Button = TabBtn,
            Elements = {},
            ElementCount = 0
        }

        -- –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∫–ª–∞–¥–∫–∏
        local function activateTab()
            for _, v in pairs(ContentContainer:GetChildren()) do
                if v:IsA("ScrollingFrame") then
                    v.Visible = false
                end
            end
            
            Page.Visible = true
            WindowObj.CurrentTab = TabBtn
            
            for _, btn in pairs(TabScroll:GetChildren()) do
                if btn:IsA("TextButton") and btn ~= TabBtn then
                    TweenService:Create(btn, TweenInfo.new(0.15), {
                        BackgroundTransparency = 0.6,
                        TextColor3 = theme.TextSecondary
                    }):Play()
                end
            end
            
            TweenService:Create(TabBtn, TweenInfo.new(0.15), {
                BackgroundTransparency = 0.3,
                TextColor3 = theme.Accent
            }):Play()
        end

        -- –ê–Ω–∏–º–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏
        TabBtn.MouseEnter:Connect(function()
            if TabBtn ~= WindowObj.CurrentTab then
                TweenService:Create(TabBtn, TweenInfo.new(0.15), {
                    BackgroundTransparency = 0.4,
                    TextColor3 = theme.Text
                }):Play()
            end
        end)
        
        TabBtn.MouseLeave:Connect(function()
            if TabBtn ~= WindowObj.CurrentTab then
                TweenService:Create(TabBtn, TweenInfo.new(0.15), {
                    BackgroundTransparency = 0.6,
                    TextColor3 = theme.TextSecondary
                }):Play()
            end
        end)
        
        TabBtn.MouseButton1Click:Connect(activateTab)

        -- –§–£–ù–ö–¶–ò–Ø –†–ê–ó–î–ï–õ–ò–¢–ï–õ–Ø
        function Tab:Separator(text)
            Tab.ElementCount = Tab.ElementCount + 1
            
            local SeparatorFrame = Instance.new("Frame")
            SeparatorFrame.Size = UDim2.new(1, -16, 0, 30)
            SeparatorFrame.BackgroundTransparency = 1
            SeparatorFrame.ZIndex = 14
            SeparatorFrame.LayoutOrder = Tab.ElementCount
            SeparatorFrame.Parent = Page
            
            local Line = Instance.new("Frame")
            Line.Size = UDim2.new(1, 0, 0, 1)
            Line.Position = UDim2.new(0, 0, 0.5, 0)
            Line.BackgroundColor3 = theme.Accent
            Line.BackgroundTransparency = 0.5
            Line.ZIndex = 15
            Line.Parent = SeparatorFrame
            
            if text then
                local TextLabel = Instance.new("TextLabel")
                TextLabel.Text = text
                TextLabel.Size = UDim2.new(0, 0, 0, 20)
                TextLabel.Position = UDim2.new(0.5, 0, 0.5, -10)
                TextLabel.BackgroundColor3 = theme.Section
                TextLabel.TextColor3 = theme.TextSecondary
                TextLabel.Font = Enum.Font.Gotham
                TextLabel.TextSize = 11
                TextLabel.ZIndex = 16
                TextLabel.Parent = SeparatorFrame
                
                local textCorner = Instance.new("UICorner")
                textCorner.CornerRadius = UDim.new(0, 4)
                textCorner.Parent = TextLabel
            end
            
            table.insert(Tab.Elements, SeparatorFrame)
            table.insert(WindowObj.Elements, SeparatorFrame)
            
            return SeparatorFrame
        end

        -- –§–£–ù–ö–¶–ò–Ø –õ–ï–ô–ë–õ–ê
        function Tab:Label(text, size)
            Tab.ElementCount = Tab.ElementCount + 1
            
            local fontSize = size or 13
            
            local LabelFrame = Instance.new("Frame")
            LabelFrame.Size = UDim2.new(1, -16, 0, 22)
            LabelFrame.BackgroundTransparency = 1
            LabelFrame.ZIndex = 14
            LabelFrame.LayoutOrder = Tab.ElementCount
            LabelFrame.Parent = Page
            
            local LabelText = Instance.new("TextLabel")
            LabelText.Text = text
            LabelText.Size = UDim2.new(1, 0, 1, 0)
            LabelText.BackgroundTransparency = 1
            LabelText.TextColor3 = theme.Text
            LabelText.Font = Enum.Font.Gotham
            LabelText.TextSize = fontSize
            LabelText.TextXAlignment = Enum.TextXAlignment.Left
            LabelText.ZIndex = 15
            LabelText.Parent = LabelFrame
            
            table.insert(Tab.Elements, LabelFrame)
            table.insert(WindowObj.Elements, LabelFrame)
            
            return LabelFrame
        end

        -- –§–£–ù–ö–¶–ò–Ø –ö–ù–û–ü–ö–ò
        function Tab:Button(text, callback, icon)
            Tab.ElementCount = Tab.ElementCount + 1
            
            local Btn = Instance.new("TextButton")
            Btn.Size = UDim2.new(1, -16, 0, 36)
            Btn.BackgroundColor3 = theme.Element
            Btn.BackgroundTransparency = 0.5
            Btn.Text = (icon or "‚Ä¢") .. "  " .. text
            Btn.TextColor3 = theme.Text
            Btn.Font = Enum.Font.Gotham
            Btn.TextSize = 13
            Btn.TextXAlignment = Enum.TextXAlignment.Left
            Btn.ZIndex = 14
            Btn.LayoutOrder = Tab.ElementCount
            Btn.Parent = Page
            
            local btnPadding = Instance.new("UIPadding")
            btnPadding.PaddingLeft = UDim.new(0, 12)
            btnPadding.Parent = Btn
            
            local btnCorner = Instance.new("UICorner")
            btnCorner.CornerRadius = UDim.new(0, 8)
            btnCorner.Parent = Btn
            
            local btnStroke = Instance.new("UIStroke")
            btnStroke.Color = theme.Accent
            btnStroke.Thickness = 1
            btnStroke.Transparency = 0.8
            btnStroke.Parent = Btn
            
            -- –ê–Ω–∏–º–∞—Ü–∏–∏
            Btn.MouseEnter:Connect(function()
                TweenService:Create(Btn, TweenInfo.new(0.15), {
                    BackgroundTransparency = 0.3,
                    Size = UDim2.new(1, -12, 0, 38)
                }):Play()
                TweenService:Create(btnStroke, TweenInfo.new(0.15), {
                    Transparency = 0.6
                }):Play()
            end)
            
            Btn.MouseLeave:Connect(function()
                TweenService:Create(Btn, TweenInfo.new(0.15), {
                    BackgroundTransparency = 0.5,
                    Size = UDim2.new(1, -16, 0, 36)
                }):Play()
                TweenService:Create(btnStroke, TweenInfo.new(0.15), {
                    Transparency = 0.8
                }):Play()
            end)
            
            -- –ö–ª–∏–∫
            Btn.MouseButton1Click:Connect(function()
                TweenService:Create(Btn, TweenInfo.new(0.1), {
                    BackgroundTransparency = 0.2,
                    Size = UDim2.new(1, -18, 0, 34)
                }):Play()
                task.wait(0.1)
                TweenService:Create(Btn, TweenInfo.new(0.1), {
                    BackgroundTransparency = 0.3,
                    Size = UDim2.new(1, -12, 0, 38)
                }):Play()
                
                if callback then
                    local success, err = pcall(callback)
                    if not success then
                        warn("Button callback error:", err)
                    end
                end
            end)
            
            table.insert(Tab.Elements, Btn)
            table.insert(WindowObj.Elements, Btn)
            return Btn
        end

        -- –§–£–ù–ö–¶–ò–Ø –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–Ø
        function Tab:Toggle(text, default, callback)
            Tab.ElementCount = Tab.ElementCount + 1
            
            local state = default or false
            
            local ToggleFrame = Instance.new("TextButton")
            ToggleFrame.Size = UDim2.new(1, -16, 0, 36)
            ToggleFrame.BackgroundColor3 = theme.Element
            ToggleFrame.BackgroundTransparency = 0.5
            ToggleFrame.Text = "  " .. text
            ToggleFrame.TextColor3 = theme.Text
            ToggleFrame.TextXAlignment = Enum.TextXAlignment.Left
            ToggleFrame.Font = Enum.Font.Gotham
            ToggleFrame.TextSize = 13
            ToggleFrame.ZIndex = 14
            ToggleFrame.LayoutOrder = Tab.ElementCount
            ToggleFrame.Parent = Page
            
            local frameCorner = Instance.new("UICorner")
            frameCorner.CornerRadius = UDim.new(0, 8)
            frameCorner.Parent = ToggleFrame
            
            local frameStroke = Instance.new("UIStroke")
            frameStroke.Color = theme.Accent
            frameStroke.Thickness = 1
            frameStroke.Transparency = 0.8
            frameStroke.Parent = ToggleFrame
            
            -- –ü–æ–ª–∑—É–Ω–æ–∫
            local SliderTrack = Instance.new("Frame")
            SliderTrack.Size = UDim2.new(0, 48, 0, 20)
            SliderTrack.Position = UDim2.new(1, -60, 0.5, -10)
            SliderTrack.BackgroundColor3 = state and theme.Accent or Color3.fromRGB(80, 80, 90)
            SliderTrack.ZIndex = 15
            SliderTrack.Parent = ToggleFrame
            
            local trackCorner = Instance.new("UICorner")
            trackCorner.CornerRadius = UDim.new(1, 0)
            trackCorner.Parent = SliderTrack
            
            -- –ö—Ä—É–∂–æ–∫
            local SliderDot = Instance.new("Frame")
            SliderDot.Size = UDim2.new(0, 16, 0, 16)
            SliderDot.Position = state and UDim2.new(1, -18, 0.5, -8) or UDim2.new(0, 2, 0.5, -8)
            SliderDot.BackgroundColor3 = Color3.fromRGB(240, 240, 245)
            SliderDot.ZIndex = 16
            local dotCorner = Instance.new("UICorner")
            dotCorner.CornerRadius = UDim.new(1, 0)
            dotCorner.Parent = SliderDot
            SliderDot.Parent = SliderTrack
            
            -- –ê–Ω–∏–º–∞—Ü–∏–∏
            ToggleFrame.MouseEnter:Connect(function()
                TweenService:Create(ToggleFrame, TweenInfo.new(0.15), {
                    BackgroundTransparency = 0.4,
                    Size = UDim2.new(1, -12, 0, 38)
                }):Play()
                TweenService:Create(frameStroke, TweenInfo.new(0.15), {
                    Transparency = 0.6
                }):Play()
            end)
            
            ToggleFrame.MouseLeave:Connect(function()
                TweenService:Create(ToggleFrame, TweenInfo.new(0.15), {
                    BackgroundTransparency = 0.5,
                    Size = UDim2.new(1, -16, 0, 36)
                }):Play()
                TweenService:Create(frameStroke, TweenInfo.new(0.15), {
                    Transparency = 0.8
                }):Play()
            end)
            
            -- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
            local function toggleState()
                state = not state
                
                if state then
                    TweenService:Create(SliderTrack, TweenInfo.new(0.15), {
                        BackgroundColor3 = theme.Accent
                    }):Play()
                    TweenService:Create(SliderDot, TweenInfo.new(0.15), {
                        Position = UDim2.new(1, -18, 0.5, -8)
                    }):Play()
                else
                    TweenService:Create(SliderTrack, TweenInfo.new(0.15), {
                        BackgroundColor3 = Color3.fromRGB(80, 80, 90)
                    }):Play()
                    TweenService:Create(SliderDot, TweenInfo.new(0.15), {
                        Position = UDim2.new(0, 2, 0.5, -8)
                    }):Play()
                end
                
                if callback then
                    local success, err = pcall(callback, state)
                    if not success then
                        warn("Toggle callback error:", err)
                    end
                end
            end
            
            ToggleFrame.MouseButton1Click:Connect(toggleState)
            
            table.insert(Tab.Elements, ToggleFrame)
            table.insert(WindowObj.Elements, ToggleFrame)
            
            return {
                Set = function(val) 
                    if val ~= state then
                        state = val
                        if state then
                            SliderTrack.BackgroundColor3 = theme.Accent
                            SliderDot.Position = UDim2.new(1, -18, 0.5, -8)
                        else
                            SliderTrack.BackgroundColor3 = Color3.fromRGB(80, 80, 90)
                            SliderDot.Position = UDim2.new(0, 2, 0.5, -8)
                        end
                    end
                end, 
                Get = function() return state end
            }
        end

        -- –§–£–ù–ö–¶–ò–Ø –°–õ–ê–ô–î–ï–†–ê
        function Tab:Slider(text, min, max, default, callback, showValue)
            Tab.ElementCount = Tab.ElementCount + 1
            
            local SliderFrame = Instance.new("Frame")
            SliderFrame.Size = UDim2.new(1, -16, 0, 60)
            SliderFrame.BackgroundColor3 = theme.Element
            SliderFrame.BackgroundTransparency = 0.5
            SliderFrame.ZIndex = 14
            SliderFrame.LayoutOrder = Tab.ElementCount
            SliderFrame.Parent = Page
            
            local frameCorner = Instance.new("UICorner")
            frameCorner.CornerRadius = UDim.new(0, 8)
            frameCorner.Parent = SliderFrame
            
            local frameStroke = Instance.new("UIStroke")
            frameStroke.Color = theme.Accent
            frameStroke.Thickness = 1
            frameStroke.Transparency = 0.8
            frameStroke.Parent = SliderFrame
            
            local Label = Instance.new("TextLabel")
            Label.Text = "  " .. text .. (showValue and (": " .. default) or "")
            Label.Size = UDim2.new(1, 0, 0, 22)
            Label.BackgroundTransparency = 1
            Label.TextColor3 = theme.Text
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Font = Enum.Font.Gotham
            Label.TextSize = 12
            Label.ZIndex = 15
            Label.Parent = SliderFrame

            local ValueLabel = Instance.new("TextLabel")
            ValueLabel.Text = tostring(default)
            ValueLabel.Size = UDim2.new(0, 36, 0, 22)
            ValueLabel.Position = UDim2.new(1, -40, 0, 0)
            ValueLabel.BackgroundTransparency = 1
            ValueLabel.TextColor3 = theme.Accent
            ValueLabel.Font = Enum.Font.GothamMedium
            ValueLabel.TextSize = 12
            ValueLabel.ZIndex = 15
            ValueLabel.Parent = SliderFrame

            local Bar = Instance.new("Frame")
            Bar.Size = UDim2.new(1, -28, 0, 5)
            Bar.Position = UDim2.new(0, 14, 1, -20)
            Bar.BackgroundColor3 = Color3.fromRGB(70, 70, 80)
            Bar.ZIndex = 15
            Bar.Parent = SliderFrame
            
            local barCorner = Instance.new("UICorner")
            barCorner.CornerRadius = UDim.new(1, 0)
            barCorner.Parent = Bar
            
            local Fill = Instance.new("Frame")
            Fill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
            Fill.BackgroundColor3 = theme.Accent
            Fill.ZIndex = 16
            Fill.Parent = Bar
            
            local fillCorner = Instance.new("UICorner")
            fillCorner.CornerRadius = UDim.new(1, 0)
            fillCorner.Parent = Fill
            
            local SliderDot = Instance.new("Frame")
            SliderDot.Size = UDim2.new(0, 14, 0, 14)
            SliderDot.Position = UDim2.new((default - min) / (max - min), -7, 0.5, -7)
            SliderDot.BackgroundColor3 = Color3.fromRGB(240, 240, 245)
            SliderDot.ZIndex = 17
            local dotCorner = Instance.new("UICorner")
            dotCorner.CornerRadius = UDim.new(1, 0)
            dotCorner.Parent = SliderDot
            SliderDot.Parent = Bar

            local function update(input)
                local pos = math.clamp((input.Position.X - Bar.AbsolutePosition.X) / Bar.AbsoluteSize.X, 0, 1)
                local val = math.floor(min + (max - min) * pos)
                
                Fill.Size = UDim2.new(pos, 0, 1, 0)
                SliderDot.Position = UDim2.new(pos, -7, 0.5, -7)
                ValueLabel.Text = tostring(val)
                
                if showValue then
                    Label.Text = "  " .. text .. ": " .. val
                end
                
                if callback then
                    local success, err = pcall(callback, val)
                    if not success then
                        warn("Slider callback error:", err)
                    end
                end
            end

            Bar.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    update(input)
                    
                    local connection
                    connection = UIS.InputChanged:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseMovement then
                            update(input)
                        end
                    end)
                    
                    UIS.InputEnded:Connect(function(input)
                        if input.UserInputType == Enum.UserInputType.MouseButton1 then
                            if connection then
                                connection:Disconnect()
                            end
                        end
                    end)
                end
            end)
            
            table.insert(Tab.Elements, SliderFrame)
            table.insert(WindowObj.Elements, SliderFrame)
            
            return {
                Set = function(val) 
                    local pos = math.clamp((val - min) / (max - min), 0, 1)
                    Fill.Size = UDim2.new(pos, 0, 1, 0)
                    SliderDot.Position = UDim2.new(pos, -7, 0.5, -7)
                    ValueLabel.Text = tostring(val)
                    if showValue then
                        Label.Text = "  " .. text .. ": " .. val
                    end
                end,
                Get = function()
                    return tonumber(ValueLabel.Text) or default
                end
            }
        end

        -- –§–£–ù–ö–¶–ò–Ø DROPDOWN
        function Tab:Dropdown(text, options, default, callback)
            Tab.ElementCount = Tab.ElementCount + 1
            
            local selected = default or options[1]
            local open = false
            local OptionsContainer
            
            -- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            local DropFrame = Instance.new("Frame")
            DropFrame.Name = "Dropdown_" .. text
            DropFrame.Size = UDim2.new(1, -16, 0, 36)
            DropFrame.BackgroundColor3 = theme.Element
            DropFrame.BackgroundTransparency = 0.5
            DropFrame.ClipsDescendants = false  -- –í–∞–∂–Ω–æ: –Ω–µ –æ–±—Ä–µ–∑–∞–µ–º –ø–æ—Ç–æ–º–∫–æ–≤
            DropFrame.ZIndex = 30  -- –°—Ä–µ–¥–Ω–∏–π ZIndex
            DropFrame.LayoutOrder = Tab.ElementCount
            DropFrame.Parent = Page
            
            local frameCorner = Instance.new("UICorner")
            frameCorner.CornerRadius = UDim.new(0, 8)
            frameCorner.Parent = DropFrame
            
            local frameStroke = Instance.new("UIStroke")
            frameStroke.Color = theme.Accent
            frameStroke.Thickness = 1
            frameStroke.Transparency = 0.8
            frameStroke.Parent = DropFrame
            
            -- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è dropdown
            local DropBtn = Instance.new("TextButton")
            DropBtn.Name = "DropBtn"
            DropBtn.Size = UDim2.new(1, 0, 0, 36)
            DropBtn.BackgroundTransparency = 1
            DropBtn.Text = "  " .. text .. ": " .. selected
            DropBtn.TextColor3 = theme.Text
            DropBtn.Font = Enum.Font.Gotham
            DropBtn.TextSize = 13
            DropBtn.TextXAlignment = Enum.TextXAlignment.Left
            DropBtn.ZIndex = 31
            DropBtn.Parent = DropFrame
            
            -- –°—Ç—Ä–µ–ª–∫–∞
            local Arrow = Instance.new("TextLabel")
            Arrow.Text = "‚ñº"
            Arrow.Size = UDim2.new(0, 20, 1, 0)
            Arrow.Position = UDim2.new(1, -25, 0, 0)
            Arrow.BackgroundTransparency = 1
            Arrow.TextColor3 = theme.TextSecondary
            Arrow.Font = Enum.Font.GothamMedium
            Arrow.TextSize = 12
            Arrow.ZIndex = 31
            Arrow.Parent = DropFrame
            
            -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–ø—Ü–∏–π
            local function createOptionsContainer()
                -- –£–Ω–∏—á—Ç–æ–∂–∞–µ–º —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –µ—Å–ª–∏ –µ—Å—Ç—å
                if OptionsContainer then
                    OptionsContainer:Destroy()
                end
                
                -- –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–ø—Ü–∏–π –≤ ScreenGui (—á—Ç–æ–±—ã –±—ã–ª –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ)
                OptionsContainer = Instance.new("Frame")
                OptionsContainer.Name = "DropdownOptions_" .. text
                OptionsContainer.BackgroundColor3 = theme.Element
                OptionsContainer.BackgroundTransparency = 0.1
                OptionsContainer.BorderSizePixel = 0
                OptionsContainer.ClipsDescendants = false
                OptionsContainer.ZIndex = 1000  -- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ZIndex
                OptionsContainer.Visible = false
                
                local optionsCorner = Instance.new("UICorner")
                optionsCorner.CornerRadius = UDim.new(0, 8)
                optionsCorner.Parent = OptionsContainer
                
                local optionsStroke = Instance.new("UIStroke")
                optionsStroke.Color = theme.Accent
                optionsStroke.Thickness = 1
                optionsStroke.Transparency = 0.5
                optionsStroke.Parent = OptionsContainer
                
                -- –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–Ω—å
                createShadow(OptionsContainer, theme.Shadow, 0.3, 6)
                
                -- –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –æ–ø—Ü–∏–π
                local OptionsList = Instance.new("ScrollingFrame")
                OptionsList.Name = "OptionsList"
                OptionsList.Size = UDim2.new(1, 0, 1, 0)
                OptionsList.BackgroundTransparency = 1
                OptionsList.BorderSizePixel = 0
                OptionsList.ScrollBarThickness = 4
                OptionsList.ScrollBarImageColor3 = theme.Accent
                OptionsList.CanvasSize = UDim2.new(0, 0, 0, #options * 32)
                OptionsList.ZIndex = 1001
                OptionsList.Parent = OptionsContainer
                
                local listLayout = Instance.new("UIListLayout")
                listLayout.Padding = UDim.new(0, 2)
                listLayout.SortOrder = Enum.SortOrder.LayoutOrder
                listLayout.Parent = OptionsList
                
                local listPadding = Instance.new("UIPadding")
                listPadding.PaddingLeft = UDim.new(0, 4)
                listPadding.PaddingRight = UDim.new(0, 4)
                listPadding.PaddingTop = UDim.new(0, 4)
                listPadding.PaddingBottom = UDim.new(0, 4)
                listPadding.Parent = OptionsList
                
                -- –°–æ–∑–¥–∞–µ–º –æ–ø—Ü–∏–∏
                for i, option in ipairs(options) do
                    local OptionBtn = Instance.new("TextButton")
                    OptionBtn.Name = "Option_" .. option
                    OptionBtn.Size = UDim2.new(1, -8, 0, 28)
                    OptionBtn.LayoutOrder = i
                    OptionBtn.BackgroundColor3 = theme.Element
                    OptionBtn.BackgroundTransparency = option == selected and 0.3 or 0.6
                    OptionBtn.Text = option
                    OptionBtn.TextColor3 = option == selected and theme.Accent or theme.TextSecondary
                    OptionBtn.Font = Enum.Font.Gotham
                    OptionBtn.TextSize = 12
                    OptionBtn.TextXAlignment = Enum.TextXAlignment.Left
                    OptionBtn.ZIndex = 1002
                    OptionBtn.Parent = OptionsList
                    
                    local optionPadding = Instance.new("UIPadding")
                    optionPadding.PaddingLeft = UDim.new(0, 10)
                    optionPadding.Parent = OptionBtn
                    
                    local optionCorner = Instance.new("UICorner")
                    optionCorner.CornerRadius = UDim.new(0, 6)
                    optionCorner.Parent = OptionBtn
                    
                    -- –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
                    OptionBtn.MouseEnter:Connect(function()
                        if option ~= selected then
                            TweenService:Create(OptionBtn, TweenInfo.new(0.15), {
                                BackgroundTransparency = 0.4,
                                TextColor3 = theme.Text
                            }):Play()
                        end
                    end)
                    
                    OptionBtn.MouseLeave:Connect(function()
                        if option ~= selected then
                            TweenService:Create(OptionBtn, TweenInfo.new(0.15), {
                                BackgroundTransparency = 0.6,
                                TextColor3 = theme.TextSecondary
                            }):Play()
                        end
                    end)
                    
                    -- –í—ã–±–æ—Ä –æ–ø—Ü–∏–∏
                    OptionBtn.MouseButton1Click:Connect(function()
                        -- –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–ø—Ü–∏–∏
                        for _, btn in pairs(OptionsList:GetChildren()) do
                            if btn:IsA("TextButton") then
                                if btn.Text == selected then
                                    TweenService:Create(btn, TweenInfo.new(0.15), {
                                        BackgroundTransparency = 0.6,
                                        TextColor3 = theme.TextSecondary
                                    }):Play()
                                end
                            end
                        end
                        
                        -- –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ–ø—Ü–∏—é
                        selected = option
                        DropBtn.Text = "  " .. text .. ": " .. selected
                        
                        -- –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –Ω–æ–≤—É—é –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ–ø—Ü–∏—é
                        TweenService:Create(OptionBtn, TweenInfo.new(0.15), {
                            BackgroundTransparency = 0.3,
                            TextColor3 = theme.Accent
                        }):Play()
                        
                        if callback then
                            local success, err = pcall(callback, selected)
                            if not success then
                                warn("Dropdown callback error:", err)
                            end
                        end
                        
                        -- –ó–∞–∫—Ä—ã–≤–∞–µ–º dropdown
                        toggleDropdown()
                    end)
                end
                
                -- –†–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Å–æ—Ç–∞ 200 –ø–∏–∫—Å–µ–ª–µ–π)
                local maxHeight = 200
                local neededHeight = #options * 32 + 8
                OptionsContainer.Size = UDim2.new(0, DropFrame.AbsoluteSize.X, 0, math.min(neededHeight, maxHeight))
                
                -- –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ DropFrame
                OptionsContainer.Parent = ScreenGui  -- –ü–æ–º–µ—â–∞–µ–º –≤ ScreenGui, —á—Ç–æ–±—ã –±—ã–ª –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ
            end
            
            -- –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è dropdown
            local function toggleDropdown()
                open = not open
                
                if open then
                    -- –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–ø—Ü–∏–π
                    createOptionsContainer()
                    
                    -- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
                    local dropAbsPos = DropFrame.AbsolutePosition
                    local dropAbsSize = DropFrame.AbsoluteSize
                    local mainAbsPos = Main.AbsolutePosition
                    
                    -- –î–æ—Å—Ç—É–ø–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å–Ω–∏–∑—É –∏ —Å–≤–µ—Ä—Ö—É
                    local spaceBelow = (mainAbsPos.Y + Main.AbsoluteSize.Y) - (dropAbsPos.Y + dropAbsSize.Y)
                    local spaceAbove = dropAbsPos.Y - mainAbsPos.Y
                    
                    -- –†–µ—à–∞–µ–º, –≥–¥–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å dropdown
                    local openUpwards = spaceBelow < OptionsContainer.Size.Y.Offset and spaceAbove > spaceBelow
                    
                    local relativeX = dropAbsPos.X - mainAbsPos.X
                    local relativeY
                    
                    if openUpwards then
                        -- –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–≤–µ—Ä—Ö—É
                        relativeY = dropAbsPos.Y - mainAbsPos.Y - OptionsContainer.Size.Y.Offset - 5
                    else
                        -- –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å–Ω–∏–∑—É
                        relativeY = dropAbsPos.Y - mainAbsPos.Y + dropAbsSize.Y + 5
                    end
                    
                    -- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é, —á—Ç–æ–±—ã dropdown –Ω–µ –≤—ã—Ö–æ–¥–∏–ª –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –æ–∫–Ω–∞
                    local maxY = Main.AbsoluteSize.Y - OptionsContainer.Size.Y.Offset - 10
                    relativeY = math.clamp(relativeY, 10, maxY)
                    
                    -- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º
                    OptionsContainer.Position = UDim2.new(0, relativeX, 0, relativeY)
                    OptionsContainer.Visible = true
                    
                    -- –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
                    OptionsContainer.Size = UDim2.new(0, DropFrame.AbsoluteSize.X, 0, 0)
                    TweenService:Create(OptionsContainer, TweenInfo.new(0.2), {
                        Size = UDim2.new(0, DropFrame.AbsoluteSize.X, 0, OptionsContainer.Size.Y.Offset)
                    }):Play()
                    
                    TweenService:Create(Arrow, TweenInfo.new(0.2), {
                        Rotation = 180,
                        TextColor3 = theme.Accent
                    }):Play()
                    
                    -- –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                    TweenService:Create(DropFrame, TweenInfo.new(0.15), {
                        BackgroundTransparency = 0.2,
                        Size = UDim2.new(1, -12, 0, 38)
                    }):Play()
                    TweenService:Create(frameStroke, TweenInfo.new(0.15), {
                        Transparency = 0.4
                    }):Play()
                    
                else
                    -- –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è
                    if OptionsContainer then
                        TweenService:Create(OptionsContainer, TweenInfo.new(0.2), {
                            Size = UDim2.new(0, DropFrame.AbsoluteSize.X, 0, 0)
                        }):Play()
                        TweenService:Create(Arrow, TweenInfo.new(0.2), {
                            Rotation = 0,
                            TextColor3 = theme.TextSecondary
                        }):Play()
                        
                        task.wait(0.2)
                        OptionsContainer:Destroy()
                        OptionsContainer = nil
                    end
                    
                    -- –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                    TweenService:Create(DropFrame, TweenInfo.new(0.15), {
                        BackgroundTransparency = 0.5,
                        Size = UDim2.new(1, -16, 0, 36)
                    }):Play()
                    TweenService:Create(frameStroke, TweenInfo.new(0.15), {
                        Transparency = 0.8
                    }):Play()
                end
            end
            
            -- –ê–Ω–∏–º–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏
            DropBtn.MouseEnter:Connect(function()
                if not open then
                    TweenService:Create(DropFrame, TweenInfo.new(0.15), {
                        BackgroundTransparency = 0.4,
                        Size = UDim2.new(1, -12, 0, 38)
                    }):Play()
                    TweenService:Create(frameStroke, TweenInfo.new(0.15), {
                        Transparency = 0.6
                    }):Play()
                end
            end)
            
            DropBtn.MouseLeave:Connect(function()
                if not open then
                    TweenService:Create(DropFrame, TweenInfo.new(0.15), {
                        BackgroundTransparency = 0.5,
                        Size = UDim2.new(1, -16, 0, 36)
                    }):Play()
                    TweenService:Create(frameStroke, TweenInfo.new(0.15), {
                        Transparency = 0.8
                    }):Play()
                end
            end)
            
            -- –û—Ç–∫—Ä—ã—Ç–∏–µ dropdown
            DropBtn.MouseButton1Click:Connect(toggleDropdown)
            
            -- –ó–∞–∫—Ä—ã—Ç–∏–µ dropdown –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            local closeDropdownConnection
            closeDropdownConnection = UIS.InputBegan:Connect(function(input)
                if open and input.UserInputType == Enum.UserInputType.MouseButton1 and OptionsContainer then
                    local mousePos = input.Position
                    local dropAbsPos = DropFrame.AbsolutePosition
                    local dropAbsSize = DropFrame.AbsoluteSize
                    
                    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ –∫–ª–∏–∫ –ø–æ dropdown –∫–Ω–æ–ø–∫–µ
                    local clickedInsideDropdownBtn = 
                        (mousePos.X >= dropAbsPos.X and mousePos.X <= dropAbsPos.X + dropAbsSize.X and
                        mousePos.Y >= dropAbsPos.Y and mousePos.Y <= dropAbsPos.Y + dropAbsSize.Y)
                    
                    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª –ª–∏ –∫–ª–∏–∫ –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –æ–ø—Ü–∏–π
                    local optionsAbsPos = OptionsContainer.AbsolutePosition
                    local optionsAbsSize = OptionsContainer.AbsoluteSize
                    local clickedInsideOptions = 
                        (mousePos.X >= optionsAbsPos.X and mousePos.X <= optionsAbsPos.X + optionsAbsSize.X and
                        mousePos.Y >= optionsAbsPos.Y and mousePos.Y <= optionsAbsPos.Y + optionsAbsSize.Y)
                    
                    -- –ó–∞–∫—Ä—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–ª–∏–∫ –±—ã–ª –≤–Ω–µ –æ–±–æ–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                    if not clickedInsideDropdownBtn and not clickedInsideOptions then
                        toggleDropdown()
                    end
                end
            end)
            
            -- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
            if not WindowObj.Connections then
                WindowObj.Connections = {}
            end
            table.insert(WindowObj.Connections, closeDropdownConnection)
            
            -- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ –æ–∫–Ω–∞
            local function onWindowDestroyed()
                if closeDropdownConnection then
                    closeDropdownConnection:Disconnect()
                end
                if OptionsContainer then
                    OptionsContainer:Destroy()
                end
            end
            
            -- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—á–∏—Å—Ç–∫—É –∫ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏—é –æ–∫–Ω–∞
            ScreenGui.Destroying:Connect(onWindowDestroyed)
            
            table.insert(Tab.Elements, DropFrame)
            table.insert(WindowObj.Elements, DropFrame)
            
            -- –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ–±—ä–µ–∫—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            return {
                Set = function(value)
                    -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ options
                    local found = false
                    for _, v in ipairs(options) do
                        if v == value then
                            found = true
                            break
                        end
                    end
                    
                    if found then
                        selected = value
                        DropBtn.Text = "  " .. text .. ": " .. value
                        
                        -- –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º dropdown –µ—Å–ª–∏ –æ–Ω –æ—Ç–∫—Ä—ã—Ç
                        if OptionsContainer and open then
                            local optionsList = OptionsContainer:FindFirstChild("OptionsList")
                            if optionsList then
                                for _, btn in pairs(optionsList:GetChildren()) do
                                    if btn:IsA("TextButton") then
                                        if btn.Text == value then
                                            TweenService:Create(btn, TweenInfo.new(0.15), {
                                                BackgroundTransparency = 0.3,
                                                TextColor3 = theme.Accent
                                            }):Play()
                                        elseif btn.Text == selected then
                                            TweenService:Create(btn, TweenInfo.new(0.15), {
                                                BackgroundTransparency = 0.6,
                                                TextColor3 = theme.TextSecondary
                                            }):Play()
                                        end
                                    end
                                end
                            end
                        end
                        
                        if callback then
                            pcall(callback, value)
                        end
                    else
                        warn("Dropdown: invalid value '" .. tostring(value) .. "'. Available:", options)
                    end
                end,
                
                Get = function()
                    return selected
                end,
                
                GetOptions = function()
                    return options
                end,
                
                AddOption = function(newOption)
                    local exists = false
                    for _, v in ipairs(options) do
                        if v == newOption then
                            exists = true
                            break
                        end
                    end
                    
                    if not exists then
                        table.insert(options, newOption)
                        if open then
                            toggleDropdown()  -- –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Å –Ω–æ–≤—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
                            task.wait(0.25)
                            toggleDropdown()
                        end
                    end
                end,
                
                RemoveOption = function(optionToRemove)
                    for i, v in ipairs(options) do
                        if v == optionToRemove then
                            table.remove(options, i)
                            if selected == optionToRemove then
                                selected = options[1] or ""
                                DropBtn.Text = "  " .. text .. ": " .. selected
                            end
                            if open then
                                toggleDropdown()  -- –ó–∞–∫—Ä—ã–≤–∞–µ–º –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Å –Ω–æ–≤—ã–º–∏ –æ–ø—Ü–∏—è–º–∏
                                task.wait(0.25)
                                toggleDropdown()
                            end
                            break
                        end
                    end
                end,
                
                Destroy = function()
                    onWindowDestroyed()
                    DropFrame:Destroy()
                end
            }
        end

        -- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        local function updatePageSize()
            local totalHeight = 0
            
            for _, element in pairs(Page:GetChildren()) do
                if not element:IsA("UIListLayout") and not element:IsA("UIPadding") then
                    totalHeight = totalHeight + element.Size.Y.Offset + 10
                end
            end
            
            Page.CanvasSize = UDim2.new(0, 0, 0, totalHeight + 15)
        end

        Page.ChildAdded:Connect(function()
            task.wait(0.01)
            updatePageSize()
        end)
        
        Page.ChildRemoved:Connect(function()
            task.wait(0.01)
            updatePageSize()
        end)

        task.spawn(function()
            task.wait(0.1)
            updatePageSize()
        end)

        -- –î–æ–±–∞–≤–ª—è–µ–º –≤–∫–ª–∞–¥–∫—É –≤ —Å–ø–∏—Å–æ–∫
        table.insert(WindowObj.Tabs, Tab)
        
        -- –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É
        if #WindowObj.Tabs == 1 then
            activateTab()
        end

        return Tab
    end

    -- –§–£–ù–ö–¶–ò–Ø –°–í–û–†–ê–ß–ò–í–ê–ù–ò–Ø –û–ö–ù–ê
    function WindowObj:ToggleMinimize()
        WindowObj.IsMinimized = not WindowObj.IsMinimized
        
        if WindowObj.IsMinimized then
            -- –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∏ –ø–æ–∑–∏—Ü–∏—é
            WindowObj.OriginalSize = Main.Size
            WindowObj.OriginalPosition = Main.Position
            
            -- –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –Ω–∞ "—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å"
            MinimizeBtn.Image = "rbxassetid://6031094668"
            
            -- –°–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            StatsLabel.Visible = false
            
            -- –°–æ–±–∏—Ä–∞–µ–º –í–°–ï —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è (–≤–∫–ª—é—á–∞—è SideBar –∏ ContentContainer)
            WindowObj.HiddenElements = {}
            for _, child in pairs(Main:GetChildren()) do
                if child.Name ~= "TopBar" then
                    table.insert(WindowObj.HiddenElements, child)
                end
            end
            
            -- –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
            TweenService:Create(Main, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = UDim2.new(Main.Size.X.Scale, Main.Size.X.Offset, 0, 45),
                Position = UDim2.new(
                    Main.Position.X.Scale,
                    Main.Position.X.Offset,
                    Main.Position.Y.Scale,
                    Main.Position.Y.Offset + (WindowObj.OriginalSize.Y.Offset - 45) / 2
                )
            }):Play()
            
            -- –ü–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–∫—Ä—ã–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã
            task.wait(0.3)
            for _, child in pairs(WindowObj.HiddenElements) do
                child.Visible = false
            end
            
            -- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            Title.Size = UDim2.new(1, -80, 1, 0)
            Title.Text = "  " .. title
            
        else
            -- –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –Ω–∞ "—Å–≤–µ—Ä–Ω—É—Ç—å"
            MinimizeBtn.Image = "rbxassetid://6031094667"
            
            -- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –∞–Ω–∏–º–∞—Ü–∏–µ–π
            for _, child in pairs(WindowObj.HiddenElements) do
                child.Visible = true
            end
            
            -- –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
            TweenService:Create(Main, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
                Size = WindowObj.OriginalSize,
                Position = WindowObj.OriginalPosition or UDim2.new(0.5, -GeminiLib.Config.WindowWidth/2, 0.5, -GeminiLib.Config.WindowHeight/2)
            }):Play()
            
            -- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ—Å–ª–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            task.wait(0.3)
            StatsLabel.Visible = true
            
            -- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞
            Title.Size = UDim2.new(1, -280, 1, 0)
            Title.Text = "  " .. title
            
            -- –û—á–∏—â–∞–µ–º —Å–ø–∏—Å–æ–∫
            WindowObj.HiddenElements = {}
        end
    end
    
    -- –ù–∞–∑–Ω–∞—á–∞–µ–º –∫–ª–∏–∫ –∫–Ω–æ–ø–∫–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
    MinimizeBtn.MouseButton1Click:Connect(function()
        WindowObj:ToggleMinimize()
    end)

    -- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–∫–Ω–∞
    function WindowObj:ChangeTheme(newThemeName)
        local newTheme = GeminiLib.Themes[newThemeName]
        if not newTheme then return end
        
        WindowObj.Theme = newTheme
        
        Main.BackgroundColor3 = newTheme.Main
        Title.TextColor3 = newTheme.Text
        TopBar.BackgroundColor3 = newTheme.Section
        
        for _, element in pairs(WindowObj.Elements) do
            if element:IsA("TextButton") or element:IsA("TextLabel") or element:IsA("TextBox") then
                if element.BackgroundTransparency ~= 1 then
                    pcall(function() 
                        element.TextColor3 = newTheme.Text 
                    end)
                end
            end
        end
    end

    function WindowObj:ToggleVisibility()
        Main.Visible = not Main.Visible
        if not Main.Visible then
            stopStatsUpdate()
        else
            startStatsUpdate()
        end
    end

    function WindowObj:Destroy()
        stopStatsUpdate()
        ScreenGui:Destroy()
    end

    return WindowObj
end

return GeminiLib
